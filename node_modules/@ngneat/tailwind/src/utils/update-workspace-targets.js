"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateWorkspaceTargets = void 0;
const is_nx_1 = require("./is-nx");
function updateWorkspaceTargets(projectName, updateWorkspaceFn) {
    return (tree, context) => {
        return updateWorkspaceFn((workspace) => {
            const project = workspace.projects.get(projectName);
            const buildTarget = project.targets.get('build');
            const serveTarget = project.targets.get('serve');
            serveTarget.builder = '@angular-builders/custom-webpack:dev-server';
            buildTarget.builder = '@angular-builders/custom-webpack:browser';
            buildTarget.options.customWebpackConfig = {
                path: 'webpack.config.js',
            };
            if (!is_nx_1.isNx(tree)) {
                const testTarget = project.targets.get('test');
                if (testTarget) {
                    testTarget.builder = '@angular-builders/custom-webpack:karma';
                    testTarget.options.customWebpackConfig = {
                        path: 'webpack.config.js',
                    };
                }
            }
        })(tree, context);
    };
}
exports.updateWorkspaceTargets = updateWorkspaceTargets;
//# sourceMappingURL=update-workspace-targets.js.map
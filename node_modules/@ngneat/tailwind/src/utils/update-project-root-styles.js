"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateProjectRootStyles = void 0;
const get_tailwind_imports_1 = require("./get-tailwind-imports");
function updateProjectRootStyles(projectName, getWorkspace, insertChange) {
    return (tree, context) => {
        return getWorkspace(tree).then((workspace) => {
            var _a, _b, _c;
            const project = workspace.projects.get(projectName);
            const [style] = [
                ...((_c = (_b = (_a = project.targets.get('build')) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.styles) !== null && _c !== void 0 ? _c : []),
            ];
            let stylePath = style;
            if (typeof style === 'object') {
                stylePath = style.input;
            }
            if (stylePath == null) {
                context.logger.error('Cannot find style path');
                return tree;
            }
            const insertion = new insertChange(stylePath, 0, get_tailwind_imports_1.getTailwindImports());
            const recorder = tree.beginUpdate(stylePath);
            recorder.insertLeft(insertion.pos, insertion.toAdd);
            tree.commitUpdate(recorder);
            return tree;
        });
    };
}
exports.updateProjectRootStyles = updateProjectRootStyles;
//# sourceMappingURL=update-project-root-styles.js.map